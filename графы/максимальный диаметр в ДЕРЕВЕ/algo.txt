Подвесим граф за вершину V (можно выбрать любую)
рассмотрим всех детей этой вершины
посчитаем длины путей для каждого ребенка

диаметром будет явл сумма 2х максимальных длин путей

те для каждого ребенка V найдем максимальный путь 
child (a1, a2, a3... an)
отсортируем массив child по невозрастанию(от большего к меньшему)
ответ = child[0] + child[1]
он же будет храниться в res[V]

массив path будет содержать самый длинный путь из текущей вершины "вниз"
массив res хранит диаметр для текущей "подвешенной" вершины